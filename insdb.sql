CREATE TABLE PERSON(
DRIVER_ID VARCHAR2(10),
NAME VARCHAR2(20),
ADDRESS VARCHAR2(15),
PRIMARY KEY(DRIVER_ID)
);

CREATE TABLE CAR(
REGNO VARCHAR2(10),
MODEL VARCHAR2(10),
YEAR NUMBER(4),
PRIMARY KEY(REGNO)
);

CREATE TABLE ACCIDENT(
REPORT_NO NUMBER(5),
ADATE DATE,
LOCATION VARCHAR2(15),
PRIMARY KEY(REPORT_NO)
);

CREATE TABLE OWNS(
DRIVER_ID VARCHAR2(10),
REGNO VARCHAR2(10),
PRIMARY KEY(DRIVER_ID,REGNO),
FOREIGN KEY(DRIVER_ID) REFERENCES PERSON(DRIVER_ID),
FOREIGN KEY(REGNO) REFERENCES CAR(REGNO)
);

CREATE TABLE PARTICIPATED(
DRIVER_ID VARCHAR2(10),
REGNO VARCHAR2(10),
REPORT_NO NUMBER(5),
DAMAGE_AMT NUMBER(7,2),
PRIMARY KEY(DRIVER_ID,REGNO,REPORT_NO),
FOREIGN KEY(DRIVER_ID,REGNO) REFERENCES OWNS(DRIVER_ID,REGNO) ON DELETE CASCADE,
FOREIGN KEY(REPORT_NO) REFERENCES ACCIDENT(REPORT_NO) ON DELETE CASCADE
);

INSERT INTO PERSON VALUES('1111','Ramu','K.S. Layout');
INSERT INTO PERSON VALUES('2222','John','Indiranagar');
INSERT INTO PERSON VALUES('3333','Whitefield','Jayanagar');
INSERT INTO PERSON VALUES('4444','Gopal','Whitefield');
INSERT INTO PERSON VALUES('5555','Latha','Vijayanagar');
commit;

INSERT INTO CAR VALUES('KA04Q2301','Maruthi-dx',2000);
INSERT INTO CAR VALUES('KA05P1000','fordicon',2000);
INSERT INTO CAR VALUES('KA03L1234','zen-vxi',1999);
INSERT INTO CAR VALUES('KA03L9999','Maruthi-dx',2002);
INSERT INTO CAR VALUES('KA01P4020','indica-vx',2002);
commit;

INSERT INTO ACCIDENT VALUES(12,'01-JUN-02','M G ROAD');
INSERT INTO ACCIDENT VALUES(200,'10-DEC-02','DOUBLE ROAD');
INSERT INTO ACCIDENT VALUES(300,'23-JUL-99','M G ROAD');
INSERT INTO ACCIDENT VALUES(25000,'11-JUN-00','RESIDENCY ROAD');
INSERT INTO ACCIDENT VALUES(26500,'16-OCT-01','RICHMOND ROAD');
commit;

INSERT INTO OWNS VALUES('1111','KA04Q2301');
INSERT INTO OWNS VALUES('2222','KA05P1000');
INSERT INTO OWNS VALUES('3333','KA03L1234');
INSERT INTO OWNS VALUES('4444','KA03L9999');
INSERT INTO OWNS VALUES('5555','KA01P4020');
commit ;

INSERT INTO PARTICIPATED VALUES('1111','KA04Q2301','12',20000);
INSERT INTO PARTICIPATED VALUES('2222','KA05P1000','200',500);
INSERT INTO PARTICIPATED VALUES('3333','KA03L1234','300',10000);
INSERT INTO PARTICIPATED VALUES('4444','KA03L9999','25000',2375);
INSERT INTO PARTICIPATED VALUES('5555','KA01P4020','26500',70000);
commit ;

UPDATE PARTICIPATED SET DAMAGE_AMT=25000 WHERE REPORT_NO=12 AND REGNO='KA04Q2301';
commit;

SELECT COUNT(*) FROM ACCIDENT WHERE ADATE LIKE '__-___-02';

SELECT COUNT(A.REPORT_NO) FROM ACCIDENT A, PARTICIPATED P, CAR C WHERE A.REPORT_NO=P.REPORT_NO AND P.REGNO=C.REGNO AND C.MODEL='MARUTHI-DX';